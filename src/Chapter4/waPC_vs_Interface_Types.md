# waPC与接口类型

如果您对不断发展的WebAssembly标准感兴趣，那么您可能遇到过接口类型。Lin Clark的这篇[博文](https://hacks.mozilla.org/2019/08/webassembly-interface-types/) 最先提到了界面类型。在WebAssembly GitHub组织中还有一个更[深入的解释](https://github.com/WebAssembly/interface-types/blob/master/proposals/interface-types/Explainer.md) 。

接口类型努力解决我们在本章中所讨论的同一个问题——支持客户机和主机之间的高级数据结构的交换。waPC通过定义一个利用线性内存的固定契约故意保持在核心1.0规范之内，接口类型(在撰写本课程时)是一个新标准的提议，它也依赖于一些其他规范增强提议。

简而言之，接口类型将“提升”和“降低”代码嵌入到模块中，这些代码定义了如何在高级数据类型和低级核心WebAssembly支持的类型(如数字和线性内存偏移)之间进行转换。然后，支持接口类型的主机运行时将使用该元数据来生成无缝转换数据的本机代码。

接口类型的好处是，它们允许更自然的语言本地接口，并且可以支持未来的开发范式，在这种范式中，我们根本不关心数据交换协议，一切都“正常工作”，就好像我们在调用本地函数一样。缺点是，如果这种接口类型的代码发生了变化，那么您最终可能不得不重新编译和重新部署宿主运行时和客户WebAssembly模块来适应。

界面类型当然看起来很有前途，并且将在WebAssembly生态系统中扮演重要的角色。然而，至少对于贯穿本课程其余部分的用例，我们更喜欢拥有一个固定契约的灵活性，允许模块和主机运行时自行发展，而不需要重新编译或重新部署来升级模式和支持的操作。我们也只能使用目前可用的工具，而且接口类型目前只在单个引擎(wasmtime)的实验性构建中得到支持。