# 实验室6.1 -创建协作Actors

在这个实验室中，您将构建一个行动者对行动者通信的工作示例。在电子商务的领域示例的基础上，我们将创建一个库存参与者和一个购物车参与者。购物车参与者将支持单个操作AddItem，该操作将向购物车添加项或返回失败的调用结果。库存参与者还将有一个名为QueryQuantity的操作，该操作仅检查特定SKU的剩余数量。当您调用购物车上的AddItem操作时，它将为该商品检查SKU的剩余库存。如果该数量不大于或等于请求的数量，购物车将返回调用失败。

对于这个实验，您将需要使用我们在前面练习中执行的步骤在Rust中创建两个参与者项目。为了让两个角色无缝沟通，他们需要对将要交换的数据的形状达成一致。在现实世界的场景中，您可能决定创建一个公共数据的共享箱(讨论共享数据结构与在互斥库中使用代码生成的利弊是一个漫长而危险的转移)，但是现在，您可以使用本章代码下载中的一个项目，该项目在commerce-starter ZIP文件中称为commerce-interface。在inventory角色中使用register_query_inventory函数来处理库存查询，并在购物车角色中使用register_add_cart_item函数。如果您想冒险，可以让购物车参与者使用HTTP服务器功能提供者来公开RESTful端点。

在实验室中，您可以使用清洗REPL或清单文件加载两个不同的参与者。您将通过向购物车参与者发送携带CartItemRequest有效负载的AddItem消息来调用它，该消息将反过来调用携带InventoryQuery有效负载的库存参与者的QueryQuantity操作，期望返回一个InventoryResponse。

请记住使用wash将调用别名放在购物车和库存参与者上(start ZIP中的makefile为您完成这一工作)。