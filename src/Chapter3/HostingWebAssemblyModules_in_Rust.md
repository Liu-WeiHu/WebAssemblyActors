# 托管在Rust中的WebAssembly模块

我们很容易想当然地认为，web浏览器完全配备了自己的WebAssembly主机运行时，可以通过JavaScript WebAssembly全局对象方便地访问它。尽管浏览器对WebAssembly的支持在所有主要浏览器中并不完全相同;Firefox、Chrome、Edge和Safari都有基线支持。

如果我们想在Rust(或几乎任何浏览器外的语言)中托管WebAssembly模块，那么我们需要搜索一个库(Rust称为这些板条箱)，它能提供我们需要的功能。这可能是一种祝福也可能是一种诅咒。如果社区和生态系统对WebAssembly的支持既深入又广泛，那将给我们带来优势。另一方面，对于其他语言的早期WebAssembly采用者来说，我们可能会发现自己处于这样一种境地:我们可能必须决定是否要自己编写运行时，因为社区还没有任何支持的库。

值得庆幸的是，Rust拥有最大的WebAssembly社区和最好的可用工具和库。我们有多种发动机可供选择，包括:
- Wasm3

    围绕wasm3 C库的Rust包装器提供了一个难以置信的快速解释器。
- Wasmtime

    到目前为止，我们一直在使用命令行工具，但是这个庞大的项目还有很多内容，它是Bytecode联盟的一部分。构建在多个其他项目和库之上的wasmtime将实时(JIT)将WebAssembly代码编译为本机代码。
- Wasmer

    另一个多语言WebAssembly宿主运行时项目，它不仅包括一个引擎，还包括一套配套的工具、库和方便的网站。

在本章的例子中，我们将使用wasm3，因为它的API相当简单，并且与前面讨论的抽象机器概念非常接近，它有处理模块、存储、模块实例、函数实例等的函数。